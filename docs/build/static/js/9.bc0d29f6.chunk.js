(this["webpackJsonpreact-adminv4"]=this["webpackJsonpreact-adminv4"]||[]).push([[9],{231:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return j}));n(68);var a,i,l=n(35),r=(n(22),n(26)),o=n(233),c=n.n(o),u=n(5),s=n(234),d=n(1),f=n(2),m=n(3),p=n(4),h=n(0),b=n.n(h),g=n(82),v=n(19),S=n(11),y=n(237),E=Object(v.a)({ajax:!0,modal:{title:function(e){return e.isEdit?"\u4fee\u6539\u7528\u6237":"\u6dfb\u52a0\u7528\u6237"}}})(a=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1,data:{}},e.fetchData=function(){if(!e.state.loading){var t=e.props.id;e.setState({loading:!0}),e.props.ajax.get("/mock/users/".concat(t)).then((function(t){e.setState({data:t}),e.form.setFieldsValue(t)})).finally((function(){return e.setState({loading:!1})}))}},e.handleSubmit=function(t){if(!e.state.loading){var n=e.props.isEdit,a=n?e.props.ajax.put:e.props.ajax.post,i=n?"\u4fee\u6539\u6210\u529f\uff01":"\u6dfb\u52a0\u6210\u529f\uff01";e.setState({loading:!0}),a("/mock/users",t,{successTip:i}).then((function(){var t=e.props.onOk;t&&t()})).finally((function(){return e.setState({loading:!1})}))}},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.isEdit&&this.fetchData()}},{key:"render",value:function(){var e=this,t=this.props.isEdit,n=this.state,a=n.loading,i=n.data,r={labelWidth:100};return b.a.createElement(S.g,{loading:a,okText:"\u4fdd\u5b58",cancelText:"\u91cd\u7f6e",onOk:function(){return e.form.submit()},onCancel:function(){return e.form.resetFields()}},b.a.createElement(l.default,{ref:function(t){return e.form=t},onFinish:this.handleSubmit,initialValues:i},t?b.a.createElement(S.c,Object.assign({},r,{type:"hidden",name:"id"})):null,b.a.createElement(S.c,Object.assign({},r,{label:"\u7528\u6237\u540d",name:"name",required:!0,noSpace:!0})),b.a.createElement(S.c,Object.assign({},r,{type:"number",label:"\u5e74\u9f84",name:"age",required:!0})),b.a.createElement(S.c,Object.assign({},r,{type:"select",label:"\u5de5\u4f5c",name:"job",options:[{value:"1",label:"\u524d\u7aef\u5f00\u53d1"},{value:"2",label:"\u540e\u7aef\u5f00\u53d1"}]})),b.a.createElement(S.c,Object.assign({},r,{type:"select",label:"\u804c\u4f4d",name:"position",options:[{value:"1",label:"\u5458\u5de5"},{value:"2",label:"CEO"}]})),b.a.createElement(S.c,Object.assign({},r,{type:"select",mode:"multiple",showSearch:!0,optionFilterProp:"children",label:"\u89d2\u8272",name:"role",options:[{value:"1",label:"\u5458\u5de5"},{value:"2",label:"CEO"}]}))))}}]),n}(h.Component))||a,j=Object(v.a)({path:"/users",ajax:!0})(i=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1,dataSource:[],selectedRowKeys:[],total:0,pageNum:1,pageSize:20,deleting:!1,visible:!1,id:null},e.columns=[{title:"\u7528\u6237\u540d",dataIndex:"name",width:200},{title:"\u5e74\u9f84",dataIndex:"age",width:200},{title:"\u5de5\u4f5c",dataIndex:"job",width:200},{title:"\u804c\u4f4d",dataIndex:"position",width:200},{title:"\u64cd\u4f5c",dataIndex:"operator",width:100,render:function(t,n){var a=n.id,i=n.name,l=[{label:"\u7f16\u8f91",onClick:function(){return e.setState({visible:!0,id:a})}},{label:"\u5220\u9664",color:"red",confirm:{title:'\u60a8\u786e\u5b9a\u5220\u9664"'.concat(i,'"?'),onConfirm:function(){return e.handleDelete(a)}}}];return b.a.createElement(S.h,{items:l})}}],e.handleSubmit=Object(s.a)(c.a.mark((function t(){var n,a,i,l,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.loading){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.form.validateFields();case 4:n=t.sent,a=e.state,i=a.pageNum,l=a.pageSize,r=Object(u.a)({},n,{pageNum:i,pageSize:l}),e.setState({loading:!0}),e.props.ajax.get("/mock/users",r).then((function(t){var n=(null===t||void 0===t?void 0:t.list)||[],a=(null===t||void 0===t?void 0:t.total)||0;e.setState({dataSource:n,total:a})})).finally((function(){return e.setState({loading:!1})}));case 9:case"end":return t.stop()}}),t)}))),e.handleDelete=function(t){e.state.deleting||(e.setState({deleting:!0}),e.props.ajax.del("/mock/users/".concat(t),null,{successTip:"\u5220\u9664\u6210\u529f\uff01",errorTip:"\u5220\u9664\u5931\u8d25\uff01"}).then((function(){return e.handleSubmit()})).finally((function(){return e.setState({deleting:!1})})))},e.handleBatchDelete=function(){if(!e.state.deleting){var t=e.state.selectedRowKeys;Object(y.a)(t.length).then((function(){e.setState({deleting:!0}),e.props.ajax.del("/mock/users",{ids:t},{successTip:"\u5220\u9664\u6210\u529f\uff01",errorTip:"\u5220\u9664\u5931\u8d25\uff01"}).then((function(){e.setState({selectedRowKeys:[]}),e.handleSubmit()})).finally((function(){return e.setState({deleting:!1})}))}))}},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.handleSubmit()}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.deleting,i=t.dataSource,o=t.selectedRowKeys,c=t.total,u=t.pageNum,s=t.pageSize,d=t.visible,f=t.id,m={width:200},p=!(null===o||void 0===o?void 0:o.length);return b.a.createElement(g.a,null,b.a.createElement(S.j,null,b.a.createElement(l.default,{onFinish:function(){return e.setState({pageNum:1},(function(){return e.handleSubmit()}))},ref:function(t){return e.form=t}},b.a.createElement(S.d,null,b.a.createElement(S.c,Object.assign({},m,{label:"\u540d\u79f0",name:"name"})),b.a.createElement(S.c,Object.assign({},m,{type:"select",label:"\u804c\u4f4d",name:"job",options:[{value:1,label:1},{value:2,label:2}]})),b.a.createElement(S.c,{layout:!0},b.a.createElement(r.default,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"),b.a.createElement(r.default,{onClick:function(){return e.form.resetFields()}},"\u91cd\u7f6e"),b.a.createElement(r.default,{type:"primary",onClick:function(){return e.setState({visible:!0,id:null})}},"\u6dfb\u52a0"),b.a.createElement(r.default,{danger:!0,loading:a,disabled:p,onClick:this.handleBatchDelete},"\u5220\u9664"))))),b.a.createElement(S.k,{rowSelection:{selectedRowKeys:o,onChange:function(t){return e.setState({selectedRowKeys:t})}},loading:n,columns:this.columns,dataSource:i,rowKey:"id",serialNumber:!0,pageNum:u,pageSize:s}),b.a.createElement(S.i,{total:c,pageNum:u,pageSize:s,onPageNumChange:function(t){return e.setState({pageNum:t},(function(){return e.handleSubmit()}))},onPageSizeChange:function(t){return e.setState({pageSize:t,pageNum:1},(function(){return e.handleSubmit()}))}}),b.a.createElement(E,{visible:d,id:f,isEdit:null!==f,onOk:function(){return e.setState({visible:!1},(function(){return e.handleSubmit()}))},onCancel:function(){return e.setState({visible:!1})}}))}}]),n}(h.Component))||i},233:function(e,t,n){e.exports=n(235)},234:function(e,t,n){"use strict";function a(e,t,n,a,i,l,r){try{var o=e[l](r),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(a,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,l){var r=e.apply(t,n);function o(e){a(r,i,l,o,c,"next",e)}function c(e){a(r,i,l,o,c,"throw",e)}o(void 0)}))}}n.d(t,"a",(function(){return i}))},235:function(e,t,n){e.exports=n(6)(653)},237:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(119);var a=n(83),i=n(0),l=n.n(i),r=n(7);function o(e){var t=l.a.createElement("div",null,"\u60a8\u786e\u5b9a\u5220\u9664",l.a.createElement("span",{style:{padding:"0 5px",color:"red",fontSize:18}},e),"\u6761\u8bb0\u5f55\u5417\uff1f");return new Promise((function(e,n){a.default.confirm({title:"\u6e29\u99a8\u63d0\u793a",content:t,icon:l.a.createElement(r.ExclamationCircleOutlined,null),okType:"danger",onOk:function(){return e(!0)},onCancel:function(){return n("user cancel confirm")}})}))}}}]);
//# sourceMappingURL=9.bc0d29f6.chunk.js.map