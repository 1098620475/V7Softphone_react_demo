(this["webpackJsonpreact-adminv4"]=this["webpackJsonpreact-adminv4"]||[]).push([[15],{230:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return j}));a(22);var n,l,r=a(26),i=a(9),c=a(5),o=a(1),d=a(2),s=a(3),u=a(4),p=a(0),m=a.n(p),b=a(11),h=a(19),f=a(82),y=a(94),v=a(23),g=(a(68),a(35)),k=Object(h.a)({ajax:!0,modal:{width:700,title:function(e){var t=e.data,a=void 0===t?{}:t,n=a.key;return"1"===a.type?n?"\u7f16\u8f91\u83dc\u5355":"\u6dfb\u52a0\u83dc\u5355":n?"\u7f16\u8f91\u529f\u80fd":"\u6dfb\u52a0\u529f\u80fd"}}})(n=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={loading:!1,iconVisible:!1},e.handleSubmit=function(t){if(!e.state.loading){console.log("Received values of form: ",t);var a=t.key?e.props.ajax.put:e.props.ajax.post,n=e.props.onOk;e.setState({loading:!0}),a("/menus",t).then((function(){e.setState({visible:!1}),n&&n()})).finally((function(){return e.setState({loading:!1})}))}},e.handleCancel=function(){var t=e.props.onCancel;t&&t()},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props.data,a=this.state.loading,n="1"===t.type,l={labelWidth:70};return m.a.createElement(b.g,{surplusSpace:!1,loading:a,okText:"\u4fdd\u5b58",onOk:function(){return e.form.submit()},cancelText:"\u91cd\u7f6e",onCancel:function(){return e.form.resetFields()}},m.a.createElement(g.default,{ref:function(t){return e.form=t},onFinish:this.handleSubmit,style:{padding:16},initialValues:t},m.a.createElement(b.c,Object.assign({},l,{type:"hidden",name:"key"})),m.a.createElement(b.c,Object.assign({},l,{type:"hidden",name:"parentKey"})),m.a.createElement(b.c,Object.assign({},l,{type:"hidden",name:"type"})),m.a.createElement(b.d,null,m.a.createElement(b.c,Object.assign({},l,{label:"\u540d\u79f0",name:"text",required:!0})),n?m.a.createElement(b.c,Object.assign({},l,{label:"\u56fe\u6807",name:"icon"}),m.a.createElement(b.f,null)):m.a.createElement(b.c,Object.assign({},l,{label:"\u7f16\u7801",name:"code",required:!0,labelTip:"\u552f\u4e00\u6807\u8bc6\uff0c\u786c\u7f16\u7801\uff0c\u524d\u7aef\u4e00\u822c\u4f1a\u7528\u4e8e\u63a7\u5236\u6309\u94ae\u662f\u5426\u663e\u793a\u3002"}))),m.a.createElement(b.d,null,m.a.createElement(b.c,Object.assign({},l,{label:"path",name:"path",labelTip:"\u83dc\u5355\u5bf9\u5e94\u7684\u9875\u9762\u5730\u5740\uff0c\u6216\u8005\u529f\u80fd\u5bf9\u5e94\u7684\u9875\u9762\u5730\u5740\u3002\u524d\u7aef\u4f1a\u57fa\u4e8e\u7528\u6237\u6240\u62e5\u6709\u7684path\uff0c\u5bf9\u8def\u7531\u8fdb\u884c\u8fc7\u6ee4\u3002"})),n?m.a.createElement(b.c,Object.assign({},l,{label:"\u6392\u5e8f",type:"number",name:"order",min:0,step:1})):null),n?m.a.createElement(b.d,null,m.a.createElement(b.c,Object.assign({},l,{label:"url",name:"url"})),m.a.createElement(b.c,Object.assign({},l,{type:"select",label:"target",name:"target",options:[{value:"",label:"\u9879\u76ee\u5185\u90e8\u7a97\u53e3"},{value:"_self",label:"\u66ff\u6362\u5f53\u524d\u7a97\u53e3"},{value:"_blank",label:"\u6253\u5f00\u65b0\u7a97\u53e3"}]}))):null))}}]),a}(p.Component))||n;a(240);var j=Object(h.a)({path:"/menu-permission",title:{text:"\u83dc\u5355&\u6743\u9650",icon:"lock"},ajax:!0})(l=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={loading:!1,menus:[],visible:!1,record:{},iconVisible:!1},e.columns=[{title:"\u540d\u79f0",dataIndex:"text",key:"text",width:300,render:function(e,t){var a=t.icon;return a?m.a.createElement("span",null,m.a.createElement(b.e,{type:a})," ",e):e}},{title:"path",dataIndex:"path",key:"path",width:250},{title:"url",dataIndex:"url",key:"url"},{title:"target",dataIndex:"target",key:"target",width:60},{title:"\u7c7b\u578b",dataIndex:"type",key:"type",width:60,render:function(e){return"1"===e?"\u83dc\u5355":"2"===e?"\u529f\u80fd":"\u83dc\u5355"}},{title:"\u529f\u80fd\u7f16\u7801",dataIndex:"code",key:"code",width:100},{title:"\u6392\u5e8f",dataIndex:"order",key:"order",width:60},{title:"\u64cd\u4f5c",dataIndex:"operator",key:"operator",width:150,render:function(t,a){var n=a.type,l=void 0===n?"1":n,r=[{label:"\u7f16\u8f91",icon:"form",onClick:function(){return e.setState({data:Object(c.a)({},a,{type:l}),visible:!0})}},{label:"\u5220\u9664",icon:"delete",color:"red",confirm:{title:"\u60a8\u8bf7\u786e\u5b9a\u8981\u5220\u9664\u6b64\u8282\u70b9\u53ca\u5176\u5b50\u8282\u70b9\u5417\uff1f",onConfirm:function(){return e.handleDeleteNode(a)}}},{label:"\u6dfb\u52a0\u5b50\u83dc\u5355",icon:"folder-add",onClick:function(){return e.setState({data:{parentKey:a.key,type:"1"},visible:!0})}},{label:"\u6dfb\u52a0\u5b50\u529f\u80fd",icon:"file-add",onClick:function(){return e.setState({data:{parentKey:a.key,type:"2"},visible:!0})}}];return m.a.createElement(b.h,{items:r})}}],e.handleAddTopMenu=function(){e.setState({data:{type:"1"},visible:!0})},e.handleDeleteNode=function(t){var a=t.key;e.setState({loading:!0}),e.props.ajax.del("/menus/".concat(a)).then((function(){e.setState({visible:!1}),e.handleSearch()})).finally((function(){return e.setState({loading:!1})}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.handleSearch()}},{key:"handleSearch",value:function(){var e=this;Object(y.a)().then((function(t){var a=Object(i.a)(t).sort((function(e,t){var a=e.order||0,n=t.order||0;return a||n?n-a:e.text>t.text?1:-1})),n=Object(v.a)(a);e.setState({menus:n})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.menus,n=t.visible,l=t.loading,i=t.data;return m.a.createElement(f.a,{className:"root-2CcLF"},m.a.createElement(b.l,null,m.a.createElement(r.default,{type:"primary",onClick:this.handleAddTopMenu},"\u6dfb\u52a0\u9876\u7ea7")),m.a.createElement(b.k,{loading:l,columns:this.columns,dataSource:a,pagination:!1}),m.a.createElement(k,{visible:n,data:i,onOk:function(){return e.setState({visible:!1},e.handleSearch)},onCancel:function(){return e.setState({visible:!1})}}))}}]),a}(p.Component))||l},240:function(e,t,a){}}]);
//# sourceMappingURL=15.e85a7f81.chunk.js.map